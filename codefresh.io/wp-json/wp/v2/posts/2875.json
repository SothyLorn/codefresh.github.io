{"id":2875,"date":"2017-05-16T05:35:18","date_gmt":"2017-05-16T05:35:18","guid":{"rendered":"https:\/\/codefresh.io\/?p=2875"},"modified":"2022-02-10T23:22:15","modified_gmt":"2022-02-10T23:22:15","slug":"announcing-multi-stage-build-support-available-now-free","status":"publish","type":"post","link":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/","title":{"rendered":"Announcing Multi-Stage Build Support: Available now, free"},"content":{"rendered":"<p>Last night we released multi-stage build support into Codefresh, now available for all users, free and paid.<\/p>\n<h2>Why a Multi-Stage build support is so valuable<\/h2>\n<p>Multi-stage build support is one of the most important features to come to Docker in the last 12 months and comes with a number of advantages over previous build patterns such as:<\/p>\n<ul>\n<li>Drastically smaller\u00a0production images<\/li>\n<li>Simpler build flow, especially for compiled languages<\/li>\n<li>Easier pipeline definition<\/li>\n<li>On Codefresh, speedier builds\u00a0thanks to caching\u00a0across all\u00a0images and layers<\/li>\n<li>It&#8217;s possible to add Unit tests right into your build flow<\/li>\n<\/ul>\n<p>Here you can see an example of just how drastic the difference can be for build size.<!--more--><\/p>\n<p><img class=\"aligncenter size-large wp-image-2876\" src=\"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001-1024x768.png\" alt=\"\" width=\"1024\" height=\"768\" srcset=\"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001.png 1024w, https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001-300x225.png 300w, https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001-768x576.png 768w, https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001-437x328.png 437w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/p>\n<p>Multi-stage build flows achieve\u00a0these big reduction in file sizes by allowing you to use multiple docker images during the build process and move only the necessary application code into the final image. Previously, Codefresh supported a workaround called Build flow which took advantage of how Codefresh maintains a consistent data layer\u00a0for each step in a pipeline. However, this required a fair amount of configuration and know how. The multi-stage build syntax allows us to support a simpler\u00a0standardized format.<\/p>\n<h2>Using Multi-Stage builds in Codefresh<\/h2>\n<p>If you&#8217;re already using Codefresh you just need to update your Dockerfile and it will automatically trigger the image build in Codefresh.<\/p>\n<p>If you&#8217;re new to Codefresh, sign up and click\u00a0add repository. If you don&#8217;t have a repository to try with a multi-stage build file I recommend <a href=\"https:\/\/github.com\/alexellis\/href-counter\">trying out this example<\/a> from alexellis.<\/p>\n<p>Select add by URL, paste in the repo url, <code class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">https:\/\/github.com\/alexellis\/href-counter<\/code> and when it comes time to specify the Dockerfile, make sure you set it to use <code class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">Dockerfile.multi<\/code>.\u00a0<img class=\"aligncenter size-medium wp-image-2877\" src=\"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/add-repo-multi-stage-300x203.png\" alt=\"\" width=\"300\" height=\"203\" srcset=\"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/add-repo-multi-stage-300x203.png 300w, https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/add-repo-multi-stage-768x518.png 768w, https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/add-repo-multi-stage-486x328.png 486w, https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/add-repo-multi-stage.png 957w\" sizes=\"(max-width: 300px) 100vw, 300px\" \/><br \/>\n<img class=\"aligncenter size-medium wp-image-2878\" src=\"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/select-dockerfile-multi-stage-300x204.png\" alt=\"\" width=\"300\" height=\"204\" srcset=\"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/select-dockerfile-multi-stage-300x204.png 300w, https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/select-dockerfile-multi-stage-768x522.png 768w, https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/select-dockerfile-multi-stage-483x328.png 483w, https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/select-dockerfile-multi-stage.png 948w\" sizes=\"(max-width: 300px) 100vw, 300px\" \/><\/p>\n<p>Additionally, if you don&#8217;t have a Dockerfile\u00a0we&#8217;ve updated our Node template to use multi-stage builds by default. You can try this by adding your repository to Codefresh, and selecting the &#8220;Codefresh Template&#8221; option.<\/p>\n<p><a href=\"https:\/\/g.codefresh.io\/signup\">Try Codefresh Free<\/a><\/p>\n<input class=\"fooboxshare_post_id\" type=\"hidden\" value=\"2875\"\/>","protected":false},"excerpt":{"rendered":"<p>Last night we released multi-stage build support into Codefresh, now available for all users, free and paid. Why a Multi-Stage build support is so valuable Multi-stage build support is one of the most important features to come to Docker in the last 12 months and comes with a number of advantages over previous build patterns &hellip; <a href=\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/\">Read more<\/a><\/p>\n","protected":false},"author":27,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[1505],"tags":[61,98,99,101],"yoast_head":"<!-- This site is optimized with the Yoast SEO Premium plugin v17.9 (Yoast SEO v18.4.1) - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Announcing Multi-Stage Build Support: Available now, free | Codefresh<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Announcing Multi-Stage Build Support: Available now, free\" \/>\n<meta property=\"og:description\" content=\"Last night we released multi-stage build support into Codefresh, now available for all users, free and paid. Why a Multi-Stage build support is so valuable Multi-stage build support is one of the most important features to come to Docker in the last 12 months and comes with a number of advantages over previous build patterns &hellip; Read more\" \/>\n<meta property=\"og:url\" content=\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/\" \/>\n<meta property=\"og:site_name\" content=\"Codefresh\" \/>\n<meta property=\"article:publisher\" content=\"https:\/\/www.facebook.com\/codefresh.io\" \/>\n<meta property=\"article:published_time\" content=\"2017-05-16T05:35:18+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-02-10T23:22:15+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001-1024x768.png\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@todaywasawesome\" \/>\n<meta name=\"twitter:site\" content=\"@codefresh\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"Dan Garfield\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"2 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/codefresh.io\/#organization\",\"name\":\"Codefresh\",\"url\":\"https:\/\/codefresh.io\/\",\"sameAs\":[\"https:\/\/www.facebook.com\/codefresh.io\",\"https:\/\/www.linkedin.com\/company\/codefresh\",\"https:\/\/www.youtube.com\/channel\/UC9r94SY6BqN05kXPIHsDXPg\",\"https:\/\/twitter.com\/codefresh\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/codefresh.io\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/codefresh.io\/wp-content\/uploads\/2022\/02\/Codefresh_Logo_Vertical_LightBkgd.png\",\"contentUrl\":\"https:\/\/codefresh.io\/wp-content\/uploads\/2022\/02\/Codefresh_Logo_Vertical_LightBkgd.png\",\"width\":800,\"height\":800,\"caption\":\"Codefresh\"},\"image\":{\"@id\":\"https:\/\/codefresh.io\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/codefresh.io\/#website\",\"url\":\"https:\/\/codefresh.io\/\",\"name\":\"Codefresh\",\"description\":\"\",\"publisher\":{\"@id\":\"https:\/\/codefresh.io\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/codefresh.io\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001.png\",\"contentUrl\":\"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001.png\",\"width\":1024,\"height\":768},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#webpage\",\"url\":\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/\",\"name\":\"Announcing Multi-Stage Build Support: Available now, free | Codefresh\",\"isPartOf\":{\"@id\":\"https:\/\/codefresh.io\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#primaryimage\"},\"datePublished\":\"2017-05-16T05:35:18+00:00\",\"dateModified\":\"2022-02-10T23:22:15+00:00\",\"breadcrumb\":{\"@id\":\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/codefresh.io\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Announcing Multi-Stage Build Support: Available now, free\"}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#webpage\"},\"author\":{\"@id\":\"https:\/\/codefresh.io\/#\/schema\/person\/17aca6389be0f81b999f1b138a0b44a4\"},\"headline\":\"Announcing Multi-Stage Build Support: Available now, free\",\"datePublished\":\"2017-05-16T05:35:18+00:00\",\"dateModified\":\"2022-02-10T23:22:15+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#webpage\"},\"wordCount\":319,\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/codefresh.io\/#organization\"},\"image\":{\"@id\":\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#primaryimage\"},\"thumbnailUrl\":\"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001-1024x768.png\",\"keywords\":[\"features\",\"multi-stage\",\"docker build\",\"announcement\"],\"articleSection\":[\"Containers\"],\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/codefresh.io\/#\/schema\/person\/17aca6389be0f81b999f1b138a0b44a4\",\"name\":\"Dan Garfield\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/codefresh.io\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/d4a38809809980ed49dc7e696a8e3938?s=96&d=blank&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/d4a38809809980ed49dc7e696a8e3938?s=96&d=blank&r=g\",\"caption\":\"Dan Garfield\"},\"description\":\"Dan is the Co-Founder and Chief Open Source Officer at Codefresh. His work in open source includes being an Argo Maintainer, and co-chair of the GitOps Working Group. As a technology leader with a background in full-stack engineering, evangelism, and communications, he led Codefresh's go-to-market strategy and now leads open source strategy. You can follow him at twitter.com\/todaywasawesome\",\"sameAs\":[\"https:\/\/twitter.com\/todaywasawesome\"],\"url\":\"https:\/\/codefresh.io\/author\/dang\/\"}]}<\/script>\n<!-- \/ Yoast SEO Premium plugin. -->","yoast_head_json":{"title":"Announcing Multi-Stage Build Support: Available now, free | Codefresh","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/","og_locale":"en_US","og_type":"article","og_title":"Announcing Multi-Stage Build Support: Available now, free","og_description":"Last night we released multi-stage build support into Codefresh, now available for all users, free and paid. Why a Multi-Stage build support is so valuable Multi-stage build support is one of the most important features to come to Docker in the last 12 months and comes with a number of advantages over previous build patterns &hellip; Read more","og_url":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/","og_site_name":"Codefresh","article_publisher":"https:\/\/www.facebook.com\/codefresh.io","article_published_time":"2017-05-16T05:35:18+00:00","article_modified_time":"2022-02-10T23:22:15+00:00","og_image":[{"url":"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001-1024x768.png"}],"twitter_card":"summary_large_image","twitter_creator":"@todaywasawesome","twitter_site":"@codefresh","twitter_misc":{"Written by":"Dan Garfield","Est. reading time":"2 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"Organization","@id":"https:\/\/codefresh.io\/#organization","name":"Codefresh","url":"https:\/\/codefresh.io\/","sameAs":["https:\/\/www.facebook.com\/codefresh.io","https:\/\/www.linkedin.com\/company\/codefresh","https:\/\/www.youtube.com\/channel\/UC9r94SY6BqN05kXPIHsDXPg","https:\/\/twitter.com\/codefresh"],"logo":{"@type":"ImageObject","@id":"https:\/\/codefresh.io\/#logo","inLanguage":"en-US","url":"https:\/\/codefresh.io\/wp-content\/uploads\/2022\/02\/Codefresh_Logo_Vertical_LightBkgd.png","contentUrl":"https:\/\/codefresh.io\/wp-content\/uploads\/2022\/02\/Codefresh_Logo_Vertical_LightBkgd.png","width":800,"height":800,"caption":"Codefresh"},"image":{"@id":"https:\/\/codefresh.io\/#logo"}},{"@type":"WebSite","@id":"https:\/\/codefresh.io\/#website","url":"https:\/\/codefresh.io\/","name":"Codefresh","description":"","publisher":{"@id":"https:\/\/codefresh.io\/#organization"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/codefresh.io\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#primaryimage","inLanguage":"en-US","url":"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001.png","contentUrl":"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001.png","width":1024,"height":768},{"@type":"WebPage","@id":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#webpage","url":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/","name":"Announcing Multi-Stage Build Support: Available now, free | Codefresh","isPartOf":{"@id":"https:\/\/codefresh.io\/#website"},"primaryImageOfPage":{"@id":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#primaryimage"},"datePublished":"2017-05-16T05:35:18+00:00","dateModified":"2022-02-10T23:22:15+00:00","breadcrumb":{"@id":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/codefresh.io\/"},{"@type":"ListItem","position":2,"name":"Announcing Multi-Stage Build Support: Available now, free"}]},{"@type":"Article","@id":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#article","isPartOf":{"@id":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#webpage"},"author":{"@id":"https:\/\/codefresh.io\/#\/schema\/person\/17aca6389be0f81b999f1b138a0b44a4"},"headline":"Announcing Multi-Stage Build Support: Available now, free","datePublished":"2017-05-16T05:35:18+00:00","dateModified":"2022-02-10T23:22:15+00:00","mainEntityOfPage":{"@id":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#webpage"},"wordCount":319,"commentCount":0,"publisher":{"@id":"https:\/\/codefresh.io\/#organization"},"image":{"@id":"https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#primaryimage"},"thumbnailUrl":"https:\/\/codefresh.io\/wp-content\/uploads\/2017\/05\/Docker-multi-stage-build-support-codefresh.001-1024x768.png","keywords":["features","multi-stage","docker build","announcement"],"articleSection":["Containers"],"inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https:\/\/codefresh.io\/containers\/announcing-multi-stage-build-support-available-now-free\/#respond"]}]},{"@type":"Person","@id":"https:\/\/codefresh.io\/#\/schema\/person\/17aca6389be0f81b999f1b138a0b44a4","name":"Dan Garfield","image":{"@type":"ImageObject","@id":"https:\/\/codefresh.io\/#personlogo","inLanguage":"en-US","url":"https:\/\/secure.gravatar.com\/avatar\/d4a38809809980ed49dc7e696a8e3938?s=96&d=blank&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/d4a38809809980ed49dc7e696a8e3938?s=96&d=blank&r=g","caption":"Dan Garfield"},"description":"Dan is the Co-Founder and Chief Open Source Officer at Codefresh. His work in open source includes being an Argo Maintainer, and co-chair of the GitOps Working Group. As a technology leader with a background in full-stack engineering, evangelism, and communications, he led Codefresh's go-to-market strategy and now leads open source strategy. You can follow him at twitter.com\/todaywasawesome","sameAs":["https:\/\/twitter.com\/todaywasawesome"],"url":"https:\/\/codefresh.io\/author\/dang\/"}]}},"acf":[],"_links":{"self":[{"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/posts\/2875"}],"collection":[{"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/users\/27"}],"replies":[{"embeddable":true,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/comments?post=2875"}],"version-history":[{"count":5,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/posts\/2875\/revisions"}],"predecessor-version":[{"id":21457,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/posts\/2875\/revisions\/21457"}],"wp:attachment":[{"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/media?parent=2875"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/categories?post=2875"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/tags?post=2875"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}