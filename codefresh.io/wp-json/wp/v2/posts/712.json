{"id":712,"date":"2016-08-16T07:00:55","date_gmt":"2016-08-16T07:00:55","guid":{"rendered":"https:\/\/codefresh.io\/?p=712"},"modified":"2022-03-01T17:00:15","modified_gmt":"2022-03-01T17:00:15","slug":"things-consider-containerizing-app","status":"publish","type":"post","link":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/","title":{"rendered":"Things to consider before containerizing your app"},"content":{"rendered":"<p>Containerizing your app, which means converting it to run inside a container on Docker or another container system, offers a number of advantages. But before jumping into containerization, you should understand how the different aspects of your app affect the way it will run in a container.<\/p>\n<p>Below, I\u2019ll cover these points, with a focus on application design, the CI layer, and environment config. This might sound like ground that has been covered before, but I promise there are some twists.<\/p>\n<p><!--more--><\/p>\n<h2>Should you containerize?<\/h2>\n<p>Before we even talk about the road to containerization, though, we should first consider whether you should containerize in the first place. Containerization does offer a lot of advantages. But the main question you should ask yourself before committing to it is whether your app is stateless.<\/p>\n<p>If it is, that\u2019s awesome! Then containerization is almost certainly right for you.<\/p>\n<p>If it isn\u2019t stateless, that doesn\u2019t necessarily mean you can\u2019t containerize. But containerization for stateful apps is more complicated. Containerization reduces the complexity of scaling elastically, but this ability can be diminished if your application is stateful.<\/p>\n<p>To discuss this topic (and how <a href=\"https:\/\/codefresh.io\/?utm_medium=blog&amp;utm_campaign=ContainerizeYourApp-post&amp;utm_source=blog\">Codefresh<\/a> can help simplify the containerization of stateful apps) at length would require a separate post. But I did want to note it briefly before jumping into the details of containerization.<\/p>\n<h2>Application Design<\/h2>\n<p>Now let\u2019s get to the main part of the article, which is how your application\u2019s design affects your ability to containerize.<\/p>\n<p>For starters, you need to understand that your app is going to reside on a containerization platform of some kind, and what that means to you.<\/p>\n<p>Containerized apps can be designed to be platform agnostic. With good design, you shouldn\u2019t need to worry about where your app is going to run and the underlying systems. This might be over-simplifying things, but let\u2019s keep it simple so we don\u2019t end up down a rabbit hole.<\/p>\n<p>An app being containerized shouldn\u2019t contain any environment config. If it did, this would preclude it from being easily deployable between environments and might mean messy elseif or switch case statements. There are three alternatives: the environment defines itself, environment variables are injected into the app at deploy time, or a combination of both. The principle is that you have a single build artifact you can deploy to any environment.<\/p>\n<p>So what does this give us? A separation of concerns between our application and our environments, allowing us to build\/configure and deploy each independently.<\/p>\n<p>Now let\u2019s start thinking about containers. Containers are meant to house a single process. For example, you wouldn\u2019t want to include your app tier and your web tier in the same container, as this would mean you\u2019d need to configure the container for both and deploy both at the same time, which is messy. This example has quite distant elements though, so, what about Apache and PHP-FPM? These are two closely linked yet distinct processes. In this example, Apache services http requests and can serve static files, yet would be able to delegate execution of PHP to a container (process) that had the responsibility of running PHP-FPM.<\/p>\n<h2>CI Layer<\/h2>\n<p>This separation is worth taking note of, as there\u2019s another question to consider at this point. What does your dev environment look like? How do you simultaneously deploy to your CI layer, UAT, stage, pre prod and prod?<\/p>\n<p>The long and short answer is that you\u2019ll need to roll your own code and config to do this based on the needs of your application. There\u2019s no right and wrong answer, and no one answer, as there are just too many CI solutions and languages that you might write your application in to cover here.<\/p>\n<p>What else do we need to cover in the CI layer, then? While talking about application design earlier, we briefly discussed environment config and that it shouldn\u2019t be contained with an app. We all know hardcoding values into an app sucks, so how can we get around this one? A simple solution would be to inject environment config as parameters when your application is deployed to any environment. (Note this is at deploy time and not build time. You should be aiming to promote a single build-up through environments instead of generating a build per environment.)<\/p>\n<h2>Environment Config<\/h2>\n<p>This takes us into environment configuration. We\u2019re looking for an app to be built once and deployed many times in many places.<\/p>\n<p>An elegant solution to an application reading environment config is for the environment to expose parts of its configuration as variables which can be used within an application. This does away with hard-coded values, switch cases and deploy time injected parameters, making your app easily portable to any other containerization platform at the same time given it has access to all your backing services.<\/p>\n<h2>Conclusion and further reading<\/h2>\n<p>We\u2019ve covered only the basic essential topics related to containerization here. There are many more that are worth considering, but the ones I outlined above represent the major challenges that you need to overcome architecturally in order to achieve your goals.<\/p>\n<p>If you haven\u2019t come across it before, have a thorough read of <a href=\"http:\/\/12factor.net\/\" target=\"_blank\" rel=\"noopener\">http:\/\/12factor.net\/<\/a> This site details principles by which to build an app if it is to be run as a service. It\u2019s a bit romantic, perhaps, but it\u2019s been a beacon of guidance for me while engineering apps in the past, and I\u2019m sure there are many engineers that can still benefit from it.<\/p>\n<p>Last but not least, it\u2019s also worth checking out the <a href=\"https:\/\/codefresh.io\/docs\/?utm_medium=Blog&amp;utm_campaign=ContainerizingYourAppBlog&amp;utm_source=Blog\">Codefresh documentation<\/a> if you\u2019re thinking about containerizing. These docs will help to familiarize you with the process of containerizing an app using an automation tool like Codefresh. They explain which parts of the containerization workflow are simple, and what you\u2019ll need to have ready before you containerize. And they just might convince you that containerization is not necessarily as complicated as I have made it out to be here, especially when you use a tool like Codefresh to do the dirty work for you.<\/p>\n<h2>Bio<\/h2>\n<p>Matthew Oaks works as a Lead DevOps Engineer at a major media broadcaster in the UK. His background is mostly in software engineering, but he also enjoys config, monitoring and graphs so much that he decided to give DevOps a shot. In his spare time he rides mountain bikes and tries to control and entertain his Labrador pup.<\/p>\n<input class=\"fooboxshare_post_id\" type=\"hidden\" value=\"712\"\/>","protected":false},"excerpt":{"rendered":"<p>Containerizing your app, which means converting it to run inside a container on Docker or another container system, offers a number of advantages. But before jumping into containerization, you should understand how the different aspects of your app affect the way it will run in a container. Below, I\u2019ll cover these points, with a focus &hellip; <a href=\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/\">Read more<\/a><\/p>\n","protected":false},"author":125,"featured_media":724,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[1505],"tags":[14,15,24],"yoast_head":"<!-- This site is optimized with the Yoast SEO Premium plugin v17.9 (Yoast SEO v18.4.1) - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Things to consider before containerizing your app | Codefresh<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Things to consider before containerizing your app\" \/>\n<meta property=\"og:description\" content=\"Containerizing your app, which means converting it to run inside a container on Docker or another container system, offers a number of advantages. But before jumping into containerization, you should understand how the different aspects of your app affect the way it will run in a container. Below, I\u2019ll cover these points, with a focus &hellip; Read more\" \/>\n<meta property=\"og:url\" content=\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/\" \/>\n<meta property=\"og:site_name\" content=\"Codefresh\" \/>\n<meta property=\"article:publisher\" content=\"https:\/\/www.facebook.com\/codefresh.io\" \/>\n<meta property=\"article:published_time\" content=\"2016-08-16T07:00:55+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-03-01T17:00:15+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/codefresh.io\/wp-content\/uploads\/2016\/08\/BlogThings-to-consider-before-containerizing-your-app.jpg\" \/>\n\t<meta property=\"og:image:width\" content=\"830\" \/>\n\t<meta property=\"og:image:height\" content=\"400\" \/>\n\t<meta property=\"og:image:type\" content=\"image\/jpeg\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@codefresh\" \/>\n<meta name=\"twitter:site\" content=\"@codefresh\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"Contributor\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"5 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/codefresh.io\/#organization\",\"name\":\"Codefresh\",\"url\":\"https:\/\/codefresh.io\/\",\"sameAs\":[\"https:\/\/www.facebook.com\/codefresh.io\",\"https:\/\/www.linkedin.com\/company\/codefresh\",\"https:\/\/www.youtube.com\/channel\/UC9r94SY6BqN05kXPIHsDXPg\",\"https:\/\/twitter.com\/codefresh\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/codefresh.io\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/codefresh.io\/wp-content\/uploads\/2022\/02\/Codefresh_Logo_Vertical_LightBkgd.png\",\"contentUrl\":\"https:\/\/codefresh.io\/wp-content\/uploads\/2022\/02\/Codefresh_Logo_Vertical_LightBkgd.png\",\"width\":800,\"height\":800,\"caption\":\"Codefresh\"},\"image\":{\"@id\":\"https:\/\/codefresh.io\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/codefresh.io\/#website\",\"url\":\"https:\/\/codefresh.io\/\",\"name\":\"Codefresh\",\"description\":\"\",\"publisher\":{\"@id\":\"https:\/\/codefresh.io\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/codefresh.io\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/codefresh.io\/wp-content\/uploads\/2016\/08\/BlogThings-to-consider-before-containerizing-your-app.jpg\",\"contentUrl\":\"https:\/\/codefresh.io\/wp-content\/uploads\/2016\/08\/BlogThings-to-consider-before-containerizing-your-app.jpg\",\"width\":830,\"height\":400},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#webpage\",\"url\":\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/\",\"name\":\"Things to consider before containerizing your app | Codefresh\",\"isPartOf\":{\"@id\":\"https:\/\/codefresh.io\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#primaryimage\"},\"datePublished\":\"2016-08-16T07:00:55+00:00\",\"dateModified\":\"2022-03-01T17:00:15+00:00\",\"breadcrumb\":{\"@id\":\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/codefresh.io\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Things to consider before containerizing your app\"}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#webpage\"},\"author\":{\"@id\":\"https:\/\/codefresh.io\/#\/schema\/person\/268e5c2e4740502fae6d803783a16c75\"},\"headline\":\"Things to consider before containerizing your app\",\"datePublished\":\"2016-08-16T07:00:55+00:00\",\"dateModified\":\"2022-03-01T17:00:15+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#webpage\"},\"wordCount\":1096,\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/codefresh.io\/#organization\"},\"image\":{\"@id\":\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#primaryimage\"},\"thumbnailUrl\":\"https:\/\/codefresh.io\/wp-content\/uploads\/2016\/08\/BlogThings-to-consider-before-containerizing-your-app.jpg\",\"keywords\":[\"docker\",\"continuous integration\",\"Containers\"],\"articleSection\":[\"Containers\"],\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/codefresh.io\/#\/schema\/person\/268e5c2e4740502fae6d803783a16c75\",\"name\":\"Contributor\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/codefresh.io\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/26bd6dd87bf70f0c1a44721c8b3abbbd?s=96&d=blank&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/26bd6dd87bf70f0c1a44721c8b3abbbd?s=96&d=blank&r=g\",\"caption\":\"Contributor\"},\"url\":\"https:\/\/codefresh.io\/author\/contributor\/\"}]}<\/script>\n<!-- \/ Yoast SEO Premium plugin. -->","yoast_head_json":{"title":"Things to consider before containerizing your app | Codefresh","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/","og_locale":"en_US","og_type":"article","og_title":"Things to consider before containerizing your app","og_description":"Containerizing your app, which means converting it to run inside a container on Docker or another container system, offers a number of advantages. But before jumping into containerization, you should understand how the different aspects of your app affect the way it will run in a container. Below, I\u2019ll cover these points, with a focus &hellip; Read more","og_url":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/","og_site_name":"Codefresh","article_publisher":"https:\/\/www.facebook.com\/codefresh.io","article_published_time":"2016-08-16T07:00:55+00:00","article_modified_time":"2022-03-01T17:00:15+00:00","og_image":[{"width":830,"height":400,"url":"https:\/\/codefresh.io\/wp-content\/uploads\/2016\/08\/BlogThings-to-consider-before-containerizing-your-app.jpg","type":"image\/jpeg"}],"twitter_card":"summary_large_image","twitter_creator":"@codefresh","twitter_site":"@codefresh","twitter_misc":{"Written by":"Contributor","Est. reading time":"5 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"Organization","@id":"https:\/\/codefresh.io\/#organization","name":"Codefresh","url":"https:\/\/codefresh.io\/","sameAs":["https:\/\/www.facebook.com\/codefresh.io","https:\/\/www.linkedin.com\/company\/codefresh","https:\/\/www.youtube.com\/channel\/UC9r94SY6BqN05kXPIHsDXPg","https:\/\/twitter.com\/codefresh"],"logo":{"@type":"ImageObject","@id":"https:\/\/codefresh.io\/#logo","inLanguage":"en-US","url":"https:\/\/codefresh.io\/wp-content\/uploads\/2022\/02\/Codefresh_Logo_Vertical_LightBkgd.png","contentUrl":"https:\/\/codefresh.io\/wp-content\/uploads\/2022\/02\/Codefresh_Logo_Vertical_LightBkgd.png","width":800,"height":800,"caption":"Codefresh"},"image":{"@id":"https:\/\/codefresh.io\/#logo"}},{"@type":"WebSite","@id":"https:\/\/codefresh.io\/#website","url":"https:\/\/codefresh.io\/","name":"Codefresh","description":"","publisher":{"@id":"https:\/\/codefresh.io\/#organization"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/codefresh.io\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#primaryimage","inLanguage":"en-US","url":"https:\/\/codefresh.io\/wp-content\/uploads\/2016\/08\/BlogThings-to-consider-before-containerizing-your-app.jpg","contentUrl":"https:\/\/codefresh.io\/wp-content\/uploads\/2016\/08\/BlogThings-to-consider-before-containerizing-your-app.jpg","width":830,"height":400},{"@type":"WebPage","@id":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#webpage","url":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/","name":"Things to consider before containerizing your app | Codefresh","isPartOf":{"@id":"https:\/\/codefresh.io\/#website"},"primaryImageOfPage":{"@id":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#primaryimage"},"datePublished":"2016-08-16T07:00:55+00:00","dateModified":"2022-03-01T17:00:15+00:00","breadcrumb":{"@id":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/codefresh.io\/"},{"@type":"ListItem","position":2,"name":"Things to consider before containerizing your app"}]},{"@type":"Article","@id":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#article","isPartOf":{"@id":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#webpage"},"author":{"@id":"https:\/\/codefresh.io\/#\/schema\/person\/268e5c2e4740502fae6d803783a16c75"},"headline":"Things to consider before containerizing your app","datePublished":"2016-08-16T07:00:55+00:00","dateModified":"2022-03-01T17:00:15+00:00","mainEntityOfPage":{"@id":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#webpage"},"wordCount":1096,"commentCount":0,"publisher":{"@id":"https:\/\/codefresh.io\/#organization"},"image":{"@id":"https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#primaryimage"},"thumbnailUrl":"https:\/\/codefresh.io\/wp-content\/uploads\/2016\/08\/BlogThings-to-consider-before-containerizing-your-app.jpg","keywords":["docker","continuous integration","Containers"],"articleSection":["Containers"],"inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https:\/\/codefresh.io\/containers\/things-consider-containerizing-app\/#respond"]}]},{"@type":"Person","@id":"https:\/\/codefresh.io\/#\/schema\/person\/268e5c2e4740502fae6d803783a16c75","name":"Contributor","image":{"@type":"ImageObject","@id":"https:\/\/codefresh.io\/#personlogo","inLanguage":"en-US","url":"https:\/\/secure.gravatar.com\/avatar\/26bd6dd87bf70f0c1a44721c8b3abbbd?s=96&d=blank&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/26bd6dd87bf70f0c1a44721c8b3abbbd?s=96&d=blank&r=g","caption":"Contributor"},"url":"https:\/\/codefresh.io\/author\/contributor\/"}]}},"acf":[],"_links":{"self":[{"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/posts\/712"}],"collection":[{"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/users\/125"}],"replies":[{"embeddable":true,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/comments?post=712"}],"version-history":[{"count":1,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/posts\/712\/revisions"}],"predecessor-version":[{"id":21724,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/posts\/712\/revisions\/21724"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/media\/724"}],"wp:attachment":[{"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/media?parent=712"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/categories?post=712"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/codefresh.io\/wp-json\/wp\/v2\/tags?post=712"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}